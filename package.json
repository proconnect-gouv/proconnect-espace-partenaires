{
  "name": "proconnect-espace-partenaires",
  "description": "Espace Partenaires de ProConnect",
  "version": "0.1.0",
  "private": true,
  "author": "DINUM",
  "license": "Apache-2.0",
  "engines": {
    "node": ">=22"
  },
  "scripts": {
    "build:packages": "cd packages/email && npm ci && npm run build && rm -f node_modules/@kitajs/html/*.d.ts",
    "predev": "npm run prisma:generate && npm run build:packages && npm run only-include-used-icons",
    "prebuild": "npm run prisma:generate && node -r @swc-node/register scripts/prebuild.ts && npm run build:packages && npm run only-include-used-icons",
    "postinstall": "rm -f node_modules/@kitajs/html/*.d.ts",
    "only-include-used-icons": "node node_modules/@codegouvfr/react-dsfr/bin/only-include-used-icons.js",
    "dev": "next dev",
    "build": "next build && npm run prod:prune",
    "prod:prune": "find node_modules -type f -name '*.map' -delete && rm -rf .next/cache",
    "start": "next start",
    "lint": "prettier --write '**/*.{ts,tsx,css,md,mdx,mjs,js}' --print-width 100 && next lint --no-cache && npm run type-check && npm run lint:pcdbapi",
    "lint:pcdbapi:test": "docker-compose run -T --rm pcdbapi-test sh -c 'ruff check . && ruff format --check .'",
    "lint:pcdbapi": "docker-compose run -T --rm pcdbapi-test sh -c 'ruff check --fix . && ruff format .'",
    "e2e": "NEXT_PUBLIC_BASE_PATH='' NODE_ENV=production npm run build && npm run playwright test",
    "test": "npm run test:lint && npm run test:pcdbapi",
    "test:unit": "vitest run",
    "test:watch": "vitest watch",
    "test:lint": "prettier '**/*.{ts,tsx,css,md,mdx,mjs,js}' --list-different --print-width 100 && next lint --no-cache && npm run type-check",
    "test:links": "start-server-and-test 'npm run dev' 3000 'linkinator 'http://localhost:3000' --recurse --skip \"^(?!http://localhost:3000)\"'",
    "test:pcdbapi": "docker-compose run -T --rm pcdbapi-test pytest -vv --cov=. --cov-report term-missing --cov-fail-under=100; docker-compose --profile test down",
    "type-check": "tsc --noEmit",
    "db_espace:reset": "dotenv -e .env.local -e .env.development -- prisma db push --schema=./prisma/db_espace.prisma",
    "db_espace:browse": "dotenv -e .env.local -e .env.development -- prisma studio --schema=./prisma/db_espace.prisma",
    "db_proconnect:browse": "dotenv -e .env.local -- prisma studio --schema=./prisma/db_proconnect.prisma",
    "db_proconnect:reset": "dotenv -e .env.local -- prisma db push --schema=./prisma/db_proconnect.prisma",
    "prisma:generate": "prisma generate --schema=./prisma/db_espace.prisma && prisma generate --schema=./prisma/db_proconnect.prisma",
    "db:reset": "bash scripts/generate-mongodb-keyfile.sh && docker-compose down -v && docker-compose up -d && sleep 5 && docker-compose exec mongodb mongosh -u fc -p pass --eval 'rs.initiate({_id:\"rs0\",members:[{_id:0,host:\"localhost:27017\"}]})' && sleep 2 && npm run db_espace:reset && npm run db_proconnect:reset",
    "prepare": "husky"
  },
  "prettier": {
    "plugins": [
      "prettier-plugin-organize-imports"
    ]
  },
  "dependencies": {
    "@codegouvfr/react-dsfr": "1.18.0",
    "@emotion/react": "^11.14.0",
    "@emotion/server": "^11.11.0",
    "@emotion/styled": "^11.14.0",
    "@gouvfr-lasuite/proconnect.debounce": "0.4.1",
    "@gouvfr-lasuite/proconnect.email": "file:packages/email",
    "@mdx-js/loader": "^3.1.0",
    "@mdx-js/react": "^3.1.0",
    "@next-auth/prisma-adapter": "^1.0.7",
    "@next/mdx": "^14.2.23",
    "@prisma/client": "^6.3.1",
    "@sentry/nextjs": "^8.54.0",
    "@shikijs/transformers": "2.1.0",
    "@socialgouv/matomo-next": "^1.9.2",
    "bson": "^6.10.2",
    "debounce": "^2.0.0",
    "html-to-text": "^9.0.5",
    "is-ci": "^3.0.1",
    "next": "^15.2.3",
    "next-auth": "^4.24.11",
    "nodemailer": "^6.9.16",
    "react": "18.3.1",
    "react-dom": "18.3.1",
    "rehype-raw": "^7.0.0",
    "rehype-slug": "^6.0.0",
    "remark-gfm": "^4.0.0",
    "sharp": "^0.33.5",
    "shiki": "2.1.0",
    "tss-react": "^4.9.14",
    "unist-util-visit": "^5.0.0"
  },
  "devDependencies": {
    "@babel/core": "^7.26.0",
    "@eslint/eslintrc": "^3.2.0",
    "@eslint/js": "^9.20.0",
    "@playwright/test": "^1.49.1",
    "@swc-node/register": "^1.10.9",
    "@swc/core": "^1.10.12",
    "@testing-library/react": "^14.3.1",
    "@types/html-to-text": "^9.0.4",
    "@types/mdx": "^2.0.13",
    "@types/node": "22.10.10",
    "@types/nodemailer": "^6.4.17",
    "@types/react": "18.3.12",
    "@types/react-dom": "18.3.1",
    "@vitejs/plugin-react": "^4.3.4",
    "dotenv-cli": "^8.0.0",
    "eslint": "9.20.0",
    "eslint-config-next": "15.1.6",
    "eslint-plugin-jsx-a11y": "6.10.2",
    "husky": "^9.1.7",
    "jsdom": "24.1.3",
    "linkinator": "^6.1.2",
    "prettier-plugin-organize-imports": "^4.1.0",
    "prisma": "^6.3.1",
    "start-server-and-test": "2.0.9",
    "typescript": "5.7.3",
    "vitest": "1.6.0"
  },
  "optionalDependencies": {
    "@swc/core-linux-x64-gnu": "^1.10.12"
  }
}
